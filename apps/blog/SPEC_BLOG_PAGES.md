# 블로그 페이지 기획서 (Product Specification)

> **작성일**: 2026-01-07  
> **작성자**: CPO  
> **버전**: v1.1

---

## 1. 개요 (Overview)

### 1.1 목표

Notion 기반 기술 블로그의 핵심 UI/UX를 구현하여, 개발자 친화적이고 모던한 기술 블로그 경험을 제공한다.

### 1.2 범위

| 기능               | 설명                                        | 우선순위 |
| ------------------ | ------------------------------------------- | -------- |
| 게시글 목록 페이지 | 포스트 리스트, 태그 사이드바(Desktop), 검색 | P0       |
| 게시글 상세 페이지 | 본문 렌더링, TOC, 읽기 시간                 | P0       |
| ISR 적용           | Incremental Static Regeneration             | P0       |
| 공통 레이아웃      | Header, Footer, 다크모드                    | P0       |

### 1.3 현재 상태 분석

| 항목                  | 상태      | 비고                   |
| --------------------- | --------- | ---------------------- |
| Next.js 16 App Router | ✅ 완료   | 포트 36001             |
| Tailwind CSS v4       | ✅ 완료   |                        |
| Notion API 연동       | ✅ 완료   | `NotionPostRepository` |
| ISR 설정              | ✅ 완료   | `revalidate=60`        |
| BlockRenderer         | ✅ 완료   | `@tuum/refract-notion` |
| Header/Footer         | ❌ 미구현 |                        |
| 다크모드 토글         | ❌ 미구현 | CSS 변수만 존재        |
| 필터링/검색           | ❌ 미구현 |                        |

---

## 2. 디자인 요구사항 (Design Requirements)

### 2.1 디자인 컨셉

**"모던 개발자 블로그"** - 기술적이고 미니멀한 느낌

| 요소          | 설명                                       |
| ------------- | ------------------------------------------ |
| 톤앤매너      | 개발자 친화적, 깔끔하고 집중할 수 있는 UI  |
| 참고 레퍼런스 | Vercel Blog, Linear Blog, Dan Abramov Blog |
| 강조 요소     | 코드 블록, 타이포그래피, 여백              |

### 2.2 컬러 시스템

> [!IMPORTANT]
> 다크모드가 기본값이며, 라이트모드도 지원한다.

#### 다크모드 (Default)

| 역할         | 컬러 코드 | 용도                |
| ------------ | --------- | ------------------- |
| Background   | `#0a0a0a` | 페이지 배경         |
| Surface      | `#141414` | 카드, 컴포넌트 배경 |
| Border       | `#262626` | 구분선              |
| Text Primary | `#ededed` | 본문 텍스트         |
| Text Muted   | `#a3a3a3` | 보조 텍스트, 날짜   |
| Accent       | `#3b82f6` | 링크, CTA           |
| Accent Hover | `#60a5fa` | 호버 상태           |

#### 라이트모드

| 역할         | 컬러 코드 | 용도                |
| ------------ | --------- | ------------------- |
| Background   | `#ffffff` | 페이지 배경         |
| Surface      | `#fafafa` | 카드, 컴포넌트 배경 |
| Border       | `#e5e5e5` | 구분선              |
| Text Primary | `#171717` | 본문 텍스트         |
| Text Muted   | `#737373` | 보조 텍스트         |
| Accent       | `#2563eb` | 링크, CTA           |

### 2.3 타이포그래피

| 요소        | 폰트       | 크기            |
| ----------- | ---------- | --------------- |
| 제목 (H1)   | Geist Sans | 2.5rem (40px)   |
| 소제목 (H2) | Geist Sans | 1.75rem (28px)  |
| 본문        | Geist Sans | 1rem (16px)     |
| 코드        | Geist Mono | 0.875rem (14px) |
| 메타정보    | Geist Sans | 0.875rem (14px) |

### 2.4 반응형 브레이크포인트

| 디바이스 | 너비           | 레이아웃                 |
| -------- | -------------- | ------------------------ |
| Mobile   | < 768px        | 단일 컬럼, 햄버거 메뉴   |
| Tablet   | 768px ~ 1024px | 단일 컬럼, 확장 메뉴     |
| Desktop  | > 1024px       | 멀티 컬럼 (TOC 사이드바) |

---

## 3. 공통 컴포넌트 (Shared Components)

### 3.1 Header

```
┌──────────────────────────────────────────────────────────────┐
│ [로고/홈]         [검색🔍]        [시리즈 ▼]       [🌙/☀️]   │
└──────────────────────────────────────────────────────────────┘
```

#### 기능 명세

| 기능          | 설명                            | 상호작용                                    |
| ------------- | ------------------------------- | ------------------------------------------- |
| 로고/홈       | 홈(리스트 페이지) 이동          | 클릭 → `/` 이동                             |
| 검색          | 제목/설명 문자열 검색           | 입력 → 실시간 필터링                        |
| 시리즈 메뉴   | 시리즈 목록 드롭다운 (현재 4개) | 클릭 → 시리즈 목록 표시 → 선택 시 필터 적용 |
| 다크모드 토글 | 라이트/다크 전환                | 클릭 → 테마 변경                            |

> [!NOTE]
> 태그 필터는 헤더에서 제외. 데스크탑 목록 페이지 우측 사이드바에서만 제공.

#### 다크모드 동작

1. 초기값: 시스템 설정 (`prefers-color-scheme`) 따름
2. 사용자 토글: `localStorage`에 저장하여 유지
3. 아이콘: 다크모드 → 🌙, 라이트모드 → ☀️

### 3.2 Footer

```
┌──────────────────────────────────────────────────────────────┐
│                                                              │
│              © 2026 Tuum Prism. All rights reserved.         │
│                   Built with Next.js · Notion                │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

#### 구성 요소

- 저작권 표시
- 기술 스택 표시 (Next.js, Notion)
- 소셜 링크 (선택, 향후 확장)

---

## 4. 게시글 목록 페이지 (List Page)

### 4.1 페이지 경로

- **URL**: `/` (루트)
- **대체 경로**: `/blog` (옵셔널, 리다이렉트)

### 4.2 레이아웃

#### Desktop (> 1024px)

```
┌──────────────────────────────────────────────────────────────┐
│                         [HEADER]                             │
└──────────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────┬────────────────────┐
│                                         │                    │
│  [페이지 타이틀]                         │  [태그 사이드바]   │
│  "개발 블로그"                           │  ┌────────────────┐│
│                                         │  │ 📌 태그        ││
│  ┌─────────────────────────────────────┐│  │                ││
│  │ 포스트 카드                          ││  │ #React         ││
│  │ ┌───────────────────────────────┐   ││  │ #TypeScript    ││
│  │ │ [제목] Next.js 16 완전 정복    │   ││  │ #Next.js       ││
│  │ │ [설명] App Router의 핵심...    │   ││  │ #TDD           ││
│  │ │ [메타] 2026.01.07 · 5분 읽기   │   ││  │ #Architecture  ││
│  │ └───────────────────────────────┘   ││  │ ...            ││
│  │ ┌───────────────────────────────┐   ││  └────────────────┘│
│  │ │ [포스트 카드 2]                │   ││                    │
│  │ └───────────────────────────────┘   ││                    │
│  └─────────────────────────────────────┘│                    │
│                                         │                    │
└─────────────────────────────────────────┴────────────────────┘
┌──────────────────────────────────────────────────────────────┐
│                         [FOOTER]                             │
└──────────────────────────────────────────────────────────────┘
```

#### Mobile (< 768px)

```
┌─────────────────────────────────┐
│           [HEADER]              │
└─────────────────────────────────┘
│                                 │
│ [페이지 타이틀]                  │
│ "개발 블로그"                    │
│                                 │
│ ┌─────────────────────────────┐ │
│ │ 포스트 카드 1                │ │
│ └─────────────────────────────┘ │
│ ┌─────────────────────────────┐ │
│ │ 포스트 카드 2                │ │
│ └─────────────────────────────┘ │
│                                 │
└─────────────────────────────────┘
┌─────────────────────────────────┐
│           [FOOTER]              │
└─────────────────────────────────┘
```

> [!NOTE]
> **모바일에서 태그 필터링 미제공** - 컨텐츠 집중 우선. 필요시 향후 별도 홈페이지로 확장.

### 4.3 기능 명세

#### 4.3.1 시리즈 필터링 (헤더 메뉴)

| 항목        | 설명                                         |
| ----------- | -------------------------------------------- |
| 위치        | **헤더 드롭다운 메뉴**                       |
| 데이터 소스 | `Post.series` 필드에서 unique 추출           |
| 표시 형태   | 드롭다운 목록 (현재 4개 시리즈)              |
| 목록 정보   | 시리즈명, 게시글 수                          |
| 상호작용    | 클릭 → 해당 시리즈 필터 적용 (`?series=xxx`) |
| 전체 보기   | 드롭다운 상단에 "전체" 옵션                  |

#### 4.3.2 태그 필터링 (데스크탑 사이드바)

| 항목        | 설명                                              |
| ----------- | ------------------------------------------------- |
| 위치        | **데스크탑 우측 사이드바** (sticky)               |
| 모바일      | **미제공** (컨텐츠 집중)                          |
| 데이터 소스 | `Post.tags[]` 에서 unique 추출                    |
| 표시 형태   | 세로 목록 (뱃지 스타일)                           |
| 상호작용    | 클릭 → 태그 필터 적용 (`?tag=xxx`)                |
| 멀티 선택   | 복수 태그 선택 지원 (`?tag=react&tag=typescript`) |
| 정렬        | 사용 빈도순 또는 알파벳순                         |

#### 4.3.3 검색

| 항목      | 설명                                 |
| --------- | ------------------------------------ |
| 검색 대상 | 제목 (`title`), 설명 (`description`) |
| 방식      | 클라이언트 사이드 필터링             |
| 디바운스  | 300ms                                |
| URL 반영  | `?q=검색어`                          |

### 4.4 포스트 카드 컴포넌트

#### 표시 정보

| 필드      | 소스               | 표시 예시                         |
| --------- | ------------------ | --------------------------------- |
| 제목      | `Post.title`       | "Next.js 16 App Router 완전 정복" |
| 설명      | `Post.description` | 2줄 제한, ellipsis                |
| 날짜      | `Post.date`        | "2026.01.07"                      |
| 태그      | `Post.tags[]`      | `#Next.js` `#React`               |
| 읽기 시간 | 계산 필요          | "5분 읽기"                        |

#### 상호작용

- 카드 전체: 상세 페이지 이동 (`/blog/[id]`)
- 태그: 해당 태그 필터 적용
- 호버: 카드 강조 효과 (border 색상 변경, 미세 scale)

---

## 5. 게시글 상세 페이지 (Detail Page)

### 5.1 페이지 경로

- **URL**: `/blog/[id]`
- **파라미터**: `id` = Notion 페이지 ID

### 5.2 레이아웃

#### Desktop (> 1024px)

```
┌──────────────────────────────────────────────────────────────┐
│                         [HEADER]                             │
└──────────────────────────────────────────────────────────────┘
┌────────────────────────────────┬─────────────────────────────┐
│                                │                             │
│  [← 목록으로]                  │  [TOC - Sticky]             │
│                                │  ┌─────────────────────────┐│
│  [제목]                        │  │ 목차                    ││
│  Understanding React Server   │  │ ● 1. 개요               ││
│  Components                    │  │   2. 주요 개념          ││
│                                │  │   3. 실전 예제          ││
│  [메타 정보]                   │  │   4. 결론               ││
│  2026.01.07 · 8분 읽기         │  └─────────────────────────┘│
│  #React #RSC #Next.js         │                             │
│                                │                             │
│  [설명]                        │                             │
│  React Server Components는...  │                             │
│                                │                             │
│  ─────────────────────────────│                             │
│                                │                             │
│  [본문 콘텐츠]                  │                             │
│  Notion BlockRenderer         │                             │
│                                │                             │
│                                │                             │
└────────────────────────────────┴─────────────────────────────┘
┌──────────────────────────────────────────────────────────────┐
│                         [FOOTER]                             │
└──────────────────────────────────────────────────────────────┘
```

#### Mobile (< 768px)

```
┌─────────────────────────────────┐
│           [HEADER]              │
└─────────────────────────────────┘
│ [← 목록으로]                    │
│                                 │
│ [제목]                          │
│ Understanding React...          │
│                                 │
│ [메타 정보]                     │
│ 2026.01.07 · 8분 읽기           │
│ #React #RSC #Next.js           │
│                                 │
│ [목차 토글 버튼] ▼              │
│ ┌─────────────────────────────┐│
│ │ 목차 (접히는 영역)           ││
│ │ 1. 개요                     ││
│ │ 2. 주요 개념                ││
│ └─────────────────────────────┘│
│                                 │
│ [본문 콘텐츠]                   │
│                                 │
└─────────────────────────────────┘
┌─────────────────────────────────┐
│           [FOOTER]              │
└─────────────────────────────────┘
```

### 5.3 기능 명세

#### 5.3.1 포스트 헤더 (Post Header)

| 요소      | 설명                                 |
| --------- | ------------------------------------ |
| 뒤로 가기 | `← 목록으로` 링크 → `/` 이동         |
| 제목      | `Post.title` - 큰 글씨, bold         |
| 날짜      | `Post.date` - "2026년 1월 7일" 형식  |
| 읽기 시간 | 본문 글자수 기반 계산                |
| 태그      | 클릭 시 목록 페이지 + 해당 태그 필터 |
| 시리즈    | (있는 경우) 시리즈 이름 표시         |
| 설명      | `Post.description` - 요약/리드 문단  |

#### 5.3.2 읽기 시간 (Reading Time)

```
계산 공식: 총 글자 수 ÷ 분당 읽기 속도

- 한국어: 분당 약 500자 기준
- 반올림하여 "N분 읽기" 표시
- 최소값: 1분
```

**구현 방식**:

1. Notion 블록에서 텍스트 콘텐츠 추출
2. 전체 문자 수 계산 (공백 제외)
3. 500으로 나누어 분 단위 계산

#### 5.3.3 목차 (Table of Contents)

| 항목        | 설명                                           |
| ----------- | ---------------------------------------------- |
| 데이터 소스 | Notion 블록 중 heading_1, heading_2, heading_3 |
| 표시 방식   | 계층적 들여쓰기                                |
| 상호작용    | 클릭 → 해당 섹션으로 smooth scroll             |
| 현재 위치   | Intersection Observer로 활성 섹션 하이라이트   |
| 반응형      | Desktop: 우측 sticky, Mobile: 토글 가능        |

**TOC 항목 구조**:

```typescript
interface TocItem {
  id: string; // 앵커 ID
  text: string; // 제목 텍스트
  level: 1 | 2 | 3; // heading 레벨
}
```

#### 5.3.4 본문 콘텐츠

- **렌더러**: `@tuum/refract-notion`의 `BlockRenderer`
- **스타일링**: `notion-theme.css` 커스터마이징
- **코드 블록**: 신택스 하이라이팅 (향후 Prism/Shiki 통합)

---

## 6. ISR (Incremental Static Regeneration) 전략

### 6.1 현재 설정

```typescript
export const revalidate = 60; // 1분마다 캐시 갱신
```

### 6.2 개선 제안

| 페이지                     | revalidate | 이유                    |
| -------------------------- | ---------- | ----------------------- |
| 목록 페이지 (`/`)          | 60초       | 새 글 빠른 반영         |
| 상세 페이지 (`/blog/[id]`) | 3600초     | 본문은 자주 바뀌지 않음 |

### 6.3 향후 확장

- `generateStaticParams`: 인기 게시글 사전 빌드
- On-demand Revalidation: Notion Webhook 연동 (Phase 7)

---

## 7. 컴포넌트 아키텍처

### 7.1 디렉토리 구조

```
src/
├── app/
│   ├── layout.tsx          # 루트 레이아웃 (Header, Footer 포함)
│   ├── page.tsx            # 목록 페이지
│   ├── globals.css         # 전역 스타일
│   └── blog/
│       └── [id]/
│           └── page.tsx    # 상세 페이지
│
├── components/
│   ├── layout/
│   │   ├── Header.tsx
│   │   ├── Footer.tsx
│   │   ├── ThemeProvider.tsx
│   │   └── ThemeToggle.tsx
│   │
│   ├── post/
│   │   ├── PostCard.tsx
│   │   ├── PostList.tsx
│   │   ├── PostHeader.tsx
│   │   ├── TableOfContents.tsx
│   │   └── ReadingTime.tsx
│   │
│   └── filter/
│       ├── TagFilter.tsx
│       ├── SeriesFilter.tsx
│       └── SearchBar.tsx
│
├── hooks/
│   ├── useTheme.ts          # 다크모드 상태 관리
│   ├── useSearch.ts         # 검색 debounce
│   └── useActiveSection.ts  # TOC 활성 섹션
│
├── lib/
│   ├── reading-time.ts      # 읽기 시간 계산
│   └── toc-extractor.ts     # TOC 추출
│
└── types/
    └── index.ts
```

### 7.2 컴포넌트 책임

| 컴포넌트          | 유형          | 책임                        |
| ----------------- | ------------- | --------------------------- |
| `ThemeProvider`   | Client        | 테마 상태 Context 제공      |
| `Header`          | Client (일부) | 네비게이션, 검색, 테마 토글 |
| `Footer`          | Server        | 정적 푸터 콘텐츠            |
| `PostList`        | Server        | 포스트 목록 데이터 패칭     |
| `PostCard`        | Server        | 개별 포스트 카드 렌더링     |
| `TableOfContents` | Client        | 스크롤 추적, 인터랙션       |
| `TagFilter`       | Client        | URL 상태 기반 필터링        |

---

## 8. 구현 단계 (Implementation Phases)

### Phase 1: 공통 레이아웃 (3일)

- [ ] 디자인 시스템 CSS 변수 정의
- [ ] ThemeProvider 구현 (다크모드 Context)
- [ ] Header 컴포넌트 (로고, 다크모드 토글)
- [ ] Footer 컴포넌트
- [ ] 루트 레이아웃 통합

### Phase 2: 목록 페이지 개선 (3일)

- [ ] PostCard 컴포넌트 리디자인
- [ ] PostList 컴포넌트 구현
- [ ] 시리즈 드롭다운 (Header 통합)
- [ ] 태그 사이드바 (Desktop only)
- [ ] 검색 기능 (Header 통합)

### Phase 3: 상세 페이지 개선 (3일)

- [ ] PostHeader 컴포넌트 (제목, 메타정보)
- [ ] 읽기 시간 계산 로직
- [ ] TableOfContents 컴포넌트
- [ ] 반응형 레이아웃 (TOC 사이드바)

### Phase 4: 마무리 (2일)

- [ ] 반응형 테스트 및 조정
- [ ] 접근성 검수 (a11y)
- [ ] 성능 최적화
- [ ] 문서화

---

## 9. 기술적 고려사항

### 9.1 Server vs Client Components

| 케이스                | 권장             |
| --------------------- | ---------------- |
| 데이터 패칭           | Server Component |
| 상호작용 (토글, 검색) | Client Component |
| 정적 렌더링           | Server Component |
| 상태 기반 UI          | Client Component |

### 9.2 URL 기반 상태 관리

필터링/검색 상태는 URL SearchParams로 관리:

- 공유 가능한 URL 제공
- 브라우저 히스토리 지원
- SSR 호환

### 9.3 성능 최적화

- 이미지: next/image 자동 최적화
- 폰트: next/font로 로컬 호스팅
- 코드 스플리팅: 라우트 기반 자동 적용

---

## 10. 참고 자료

- [Post Entity 정의](./src/domain/post/post.entity.ts)
- [NotionPostRepository](./src/infrastructure/notion/notion.repository.ts)
- [프로젝트 기획서](./docs/PLAN.md)
- [TODO 체크리스트](./TODO.md)
